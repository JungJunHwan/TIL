# 16장 클래스 안의 클래스

## Nested 클래스

- 자바에서는 클래스 안에 클래스가 들어갈 수 있는데 이를 nested 클래스라 부른다
- 자바 기반의 UI 처리를 할 때 사용자의 입력이나, 외부의 이벤트에 대한 처리를 하는 곳에서 가장 많이 사용된다
- 선언 방법에 따라 구분된다
    - Static nested 클래스 : static 클래스 선언
    - 내부(inner) 클래스 : static 없이 선언
        - 로컬 내부 클래스 : 이름이 있는 내부 클래스
        - 익명 내부 클래스 : 이름이 없는 내부 클래스
- 사용하는 이유
    - 한 곳에서만 사용되는 클래스를 논리적으로 묶어서 처리할 필요가 있을 때 (Static nested 클래스)
    - 캡슐화가 필요할 때. 즉, 내부 구현을 감추고 싶을 때 (내부 클래스)

---

## Static Nested 클래스의 특징

- 내부 클래스는 감싸고 있는 외부 클래스의 어떤 변수도 접근할 수 있다
- 하지만 Static Nested 클래스는 static 하기 때문에 그럴 수 없다
- 선언과 생성

```java
// 선언
public class OuterOfStatic{
    static class StaticNested{}
}

// 생성
OuterOfStatic.StaticNested staticNested = new OuterOfStatic.StaticNested();
```

---

## 내부 클래스와 익명 클래스
### 내부 클래스
- 선언과 생성

```java
// 선언
public class OuterOfInner{
    class Inner{}
}

// 생성
OuterOfInner outer = new OuterOfInner();
OuterOfInner inner = outer.new Inner();
```

- Static Nested와 내부 클래스는 객체를 생성한 다음에 사용하는 방법은 차이가 없다
- 하지만, 객체를 생성하는 방법에 차이가 있다
- 내부 클래스의 객체를 생성하기 전에 먼저 이를 감싸는 클래스의 객체를 생성하고 이 객체를 통해 내부 클래스의 객체를 생성한다

### 익명 클래스
- 사용법
```java
new AnonymousClass() { /* 메소드 */ };
```
- 익명 클래스는 생성자를 호출한 후 바로 중괄호를 열어 소스코드를 작성한다
- 이렇게 구현한 것이 익명 클래스이다
- 이렇게 구현하면 클래스의 이름도 없고 객체 이름도 없기 때문에 다른 클래스나 메소드에서는 참조할 수 없다.
- 객체를 해당 클래스 내에서 재사용 하려면 다음과 같이 객체를 생성한 후 사용하면 된다

```java
AnonymousClass anonymousClass = new AnonymousClass() { /* 메소드 */ };
```

---

## Nested 클래스의 특징

- Static Nested 클래스는 감싸고 있는 클래스의 static 변수만 참조할 수 있다
- 내부 클래스는 감싸고 있는 클래스의 어떤 변수라도 참조할 수 있다
- 반대로 감싸고 있는 클래스에서 Static Nested 클래스의 인스턴스 변수나
내부 클래스의 인스터스 변수로의 접근도 가능하다
- 변수가 private라고 할지라도 가능하다

```java
// 감싸고 있는 클래스에서 Static Nested 클래스와 내부 클래스의 인스턴스 변수 접근 예시 코드
public class Example {
    static class StaticNested {
        private int staticNestedInt = 0;
    }

    class Inner {
        private int innerInt = 0;
    }

    public void setValue(int value) {
        StaticNested nested = new StaticNested();
        nested.staticNestedInt = 1;

        Inner inner = new inner();
        inner.innerInt = value;
    }
}
```