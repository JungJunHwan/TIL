# 쿠키와 세션의 차이

## 쿠키 (Cookie)

쿠키는 사용자의 브라우저에 직접 저장되는 작은 데이터 조각이다

- 브라우저 저장 : 데이터가 클라이언트 측인 웹 브라우저에 저장된다
- 전송 방식 : 키-값 형태의 데이터가 HTTP 헤더에 담겨 매 요청마다 서버로 전송된다
- 보안성 : 클라이언트에 저장되기 때문에 사용자가 직접 수정하거나 훔쳐볼 수 있는 위변조 가능성이 존재한다
    - 이를 보완하기 위해 자바스크립트 접근을 차단하는 HttpOnly 속서이나, HTTPS에서만 전송되는 Secure 설정을 사용한다
- 서버 영향 : 데이터 관리를 브라우저가 직접 수행하므로 서버 측의 부하가 적다
- 유효 기간(TTL) : 데이터의 유효 시간을 설정해 브라우저 종료 여부와 상관없이 유지할 수 있다

### 쿠키 옵션

- Secure
    - 쿠키가 HTTPS 프로토콜을 통해서만 전송되도록 제한
- HttpOnly
    - 브라우저에서 JavaScript를 통해 쿠키에 접근하는 것을 금지
    - 웹 사이트의 취약점을 이용해 악성 스크립트를 실행시키는 XSS 공격을 막기 위함
- SameSite
    - 사용자가 접속한 사이트와 쿠키를 요청하는 사이트가 다를 때, 쿠키 전송 여부를 결정
    - 다른 사이트에서 내가 로그인한 사이트로 원치 않는 요청을 보내는 CSRF(Cross-Site Request Forgery) 공격을 방지하기 위함
    - 설정에 따라 다음과 같이 동작
        - Strict : 오직 쿠키를 생성한 사이트에서만 쿠키를 보낼 수 있음 (가장 강력)
        - Lax : 다른 사이트에서 링크를 타고 넘어올 때처럼 안전한 상황에서만 일부 전송을 허용 (크롬 등의 브라우저 기본값)
        - None : 모든 교차 사이트 요청에서 쿠키 전송을 허용 (반드시 Secure 속성이 함께 설정되어야 함)

## 세션 (Session)

세션은 중요 데이터를 서버 측에서 관리하는 방식

- 서버 측 메모리 / 저장소 : 민감한 정보는 브라우저가 아닌 서버의 메모리나 데이터베이스에 안전하게 보관
- 식별 방식 : 서버는 사용자를 구분하기 위한 세션 ID를 생성하여 클라이언트의 쿠키에 저장하며, 이후 서버는 이 ID를 기반으로 사용자를 식별
- 보안성 : 실제 데이터가 서버에 저장되므로 쿠키 방식에 비해 상대적으로 안전
- 관리 방식 : 서버 리소스를 사용하므로 일정 시간 활동이 없으면 만료되는 타임아웃 설정을 하거나, 로그아웃 시 서버에서 직접 데이터를 제거